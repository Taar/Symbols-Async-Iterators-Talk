<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
  <title>Symbols & Iterators</title>
  <link href='big.css' rel='stylesheet' type='text/css' />
  <link href='highlight.css' rel='stylesheet' type='text/css' />
  <link href='custom.css' rel='stylesheet' type='text/css' />
  <link href='animation.css' rel='stylesheet' type='text/css' />
  <style>
    .new-shiny { background: #aaaaaa; }
  </style>
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/popmotion/dist/popmotion.min.js"></script>
  <script src="animation_functions.js"></script>
  <script src='big.js'></script>
  <script src='highlight.js'></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body class='dark'>
  <span class="top-corner">
    <span class="domain"><i class="fab fa-github"></i> Taar/Symbols-Async-Iterators-Talk</span>
    <span class="section"></span>
  </span>
  <span class="top-right-corner">
    @RandyTopliffe
  </span>

  <div>
    <h1>Symbols, Iterators, &amp; Async Iterators</h1>
    <div class="animate-me"
         data-animation-fn="powerUp">
      <p>Leveling up your JavaScript</p>
    </div>
  </div>

  <div>
    <div class="animate-me move relative-size"
      data-animation-fn="slideFromTo"
      data-animation-from="3x1"
      data-animation-to="center">
      Generators
      <pre>
<code class="javascript">
yield moarPizza;
</code>
      </pre>
    </div>
  </div>

  <!-- START SYMBOLS -->

  <div>
    <pre>
<code class="javascript">
  Symbol();
</code>
    </pre>
  </div>

  <div>
    <pre>
<code class="javascript">
typeof Symbol('pizza');
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".javascript :first-child">
// symbol
</div>
</code>
    </pre>
    <notes>Primitive Type</notes>
  </div>

  <div>
    <pre>
<code class="javascript">
const pizzaSymbol = Symbol('pizza');

new Symbol(':(');
<div class="animate-me move red"
     data-animation-fn="below"
     data-element-selector=".javascript :nth-child(4)">
// <i class="fas fa-exclamation-triangle"></i> TypeError
</div>
</code>
    </pre>
    <notes>Factory - new keyword will throw an error if used</notes>
  </div>

  <div>
    <div class="animate-me move red"
         data-animation-fn="centerAbove"
         data-element-selector=".javascript :nth-child(2)">
      <i class="fas fa-angle-double-down"></i>
      Optional
      <i class="fas fa-angle-double-down"></i>
    </div>
    <pre>
<code class="javascript">
Symbol('pizza').toString();
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".javascript :first-child">
// 'Symbol(pizza)'
</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".javascript :last-child">
// 'Symbol()'
</div>
</code>
    </pre>
    <notes>The string passed into Symbol is for debugging purposes. Also helps with
    code readability</notes>
  </div>

  <div>
    <pre>
<code class="javascript">
Symbol('pizza') === Symbol('pizza');
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".javascript :first-child">
// false
</div>
</code>
    </pre>
    <notes>Symbols are unique not matter what string you pass in</notes>
  </div>

  <div>
    <pre>
<code class="javascript">
const myGlobalSymbol = Symbol.for('myGlobalSymbol');

<span class="animation-anchor-one"></span>myGlobalSymbol === Symbol.for('myGlobalSymbol');
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".javascript .animation-anchor-one">
// true
</div>
</code>
    </pre>
    <notes>
      If you need a global symbol you can register it in the Global registry.
      `Symbol.for` will create a new symbol if it doesn't already exist.
      You can retrieve it by using the key given to `Symbol.for`.
    </notes>
  </div>

  <div>
    <pre>
<code class="javascript">
Symbol.keyFor(myGlobalSymbol);
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".javascript :first-child">
// 'myGlobalSymbol'
</div>
</code>
    </pre>
    <notes>
      If you have a reference to a symbol and what to know it's key in the global registry
    </notes>
  </div>

  <div>How is this useful?</div>

  <div>
    <pre>
<code class="javascript">
// Computed Property names
const obj = {
  [<div class="animation-anchor one">1</div>]: 'one',
  [<div class="animation-anchor two">foo</div>]: 'wat',
  [<div class="animation-anchor three">`on${eventName}`</div>]: () =&gt; {},
};
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
const <div class="animation-anchor one">Person</div> = (() =&gt; {
  <div class="animation-anchor two">const <div class="animation-anchor three">invitedS = Symbol('invited');</div>

<div class="animation-anchor four">return class Person_</div> {
  // ...
};</div>
})();
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move green"
         data-animation-fn="centerLeftOf"
         data-element-selector=".animation-anchor.two">
      <i class="fas fa-angle-double-right"></i><br />
      <i class="fas fa-angle-double-right"></i><br />
      <i class="fas fa-angle-double-right"></i><br />
      <i class="fas fa-angle-double-right"></i><br />
      <i class="fas fa-angle-double-right"></i>
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.four">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
  // ...
  constructor(<div class="animation-anchor one">{ name, invite = false }</div>) {
    <div class="animation-anchor two">this.name = name;</div>
    this[<div class="animation-anchor three">invitedS</div>] = invite;
  }
  // ...
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
  // ...
  <div class="animation-anchor one"><div class="getter-setter">set</div> isInvited(inviteStatus)</div> {
    this[<div class="animation-anchor two">invitedS</div>] = inviteStatus;
  }

  <div class="animation-anchor three"><div class="getter-setter">get</div> isInvited()</div> {
    return this[<div class="animation-anchor four">invitedS</div>];
  }
  // ...
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.four">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
  // ...
  // Works with Object.prototype.toString()
  <div class="animation-anchor one"><div class="getter-setter">get</div> [Symbol.toStringTag]()</div> {
    return this.name;
  }
  // ...
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
  const dwight = new Person({ name: 'Dwight', invite: true });

  <div class="animation-anchor one">dwight.isInvited;</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// true
</div>
</code>
    </pre>
  </div>

  <div>
    <pre>
<code class="javascript">
  <div class="animation-anchor one">dwight.toString()</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// 'Dwight'
</div>
  <div class="animation-anchor two">`${dwight}`</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.two">
// 'Dwight'
</div>
</code>
    </pre>
  </div>

  <div>
    <pre>
<code class="javascript">
  <div class="animation-anchor one">JSON.stringify(dwight);</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// { "name": "Dwight" }
</div>
</code>
    </pre>
    <notes>JSON.stringify() ignores Symbol-keyed properties</notes>
  </div>

  <div>
    <pre>
<code class="javascript">
  <div class="animation-anchor one">Object.getOwnPropertyNames(dwight);</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// Array [ 'name' ]
</div>
</code>
    </pre>
    <notes>Doesn't show Symbol-keyed properties</notes>
  </div>

  <div>
    <pre>
<code class="javascript">
  <div class="animation-anchor one">Object.getOwnPropertySymbols(dwight);</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// Array [ 'symbol('invited')' ]
</div>
</code>
    </pre>
    <notes>Only get Symbol-keyed properties</notes>
  </div>

  <!-- END SYMBOLS -->

  <!-- START ITERATORS -->

  <div>
    <pre>
<code class="javascript">
  Symbol.Iterator
</code>
    </pre>
  </div>

  <div>
    <pre>
<code class="javascript">
const <div class="animation-anchor one">iterFactory = () =&gt;</div> {
  let value = 0;
  <div class="animation-anchor two">return {</div>
    <div class="animation-anchor three">next: () =&gt;</div> {
      value += 1;
      if (count &lt;= 10) {
        <div class="animation-anchor four">return { value, done: false };</div>
      }
      <div class="animation-anchor five">return { done: true };</div>
    }
  }
}
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.four">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.five">
    </div>
    <notes>
      A function that returns an object with the property next.
      Next needs to return an object with value and done. Value being the object in the iteration and done
      being true if there are no more objects to return.
      Generators are one way, you can't go backwards. To do that you'll need to call the iterator function again.
    </notes>
  </div>

  <div>
    <pre>
<code class="javascript">
const Party = (() =&gt; {
  const <div class="animation-anchor one">guestListS = Symbol('guestList')</div>;

  return class Party_ {
    // ...
  };
})();
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
// ...
constructor (guests = []) {
  this[<div class="animation-anchor one">guestListS</div>] = new Set(guests);
}

add (guest) {
  this[<div class="animation-anchor two">guestListS</div>].add(guest);
}
// ...
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
  </div>

  <div>
    <pre>
<code class="javascript">
const party2018 = new Party();
party2018.add(new Person({name: 'Jim', invite: true}));
party2018.add(new Person({name: 'Pam', invite: true}));
party2018.add(new Person({name: 'Michael', invite: false}));
party2018.add(new Person({name: 'Dwight', invite: true}));
party2018.add(new Person({name: 'Andy', invite: true}));
</code>
    </pre>
  </div>

  <div>
    <pre>
<code class="javascript">
// ...
<div class="getter-setter">get</div> guestList () {
  return this[guestList].<div class="animation-anchor one">values()</div>;
}
// ...
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <notes>.values() is a method of Set which returns an Iterator of the values in the Set</notes>
  </div>

  <div>
    <pre>
<code class="javascript">
const guests = party2018.guestList;
<div class="animation-anchor one">guests.next</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// function next { ... }
</div>
<div class="animation-anchor two">guests.next()</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.two">
// { value: 'Jim', done: true }
</div>
<div class="animation-anchor three">guests.next()</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.three">
// { value: undefined, done: true }
</div>
</code>
    </pre>
    <notes>
      Iterators return an object like { name: Function }
      next should return { value: Object, done: Boolean }
      done will be true when there are no more items to iterator over.
    </notes>
  </div>

  <div>
    <pre>
<code class="javascript">
for (const <div class="animation-anchor three">guest</div> <div class="animation-anchor one">of</div> <div class="animation-anchor two">party2018.guestList</div>) {
  console.log(guest);
}
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
    <notes></notes>
  </div>

  <div>
    <pre>
<code class="javascript">
// ... Party class
<div class="animation-anchor one">[Symbol.iterator] ()</div> {
  <div class="animation-anchor two">return this[guestList].values();</div>
}
// ... 
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <notes>
      [Symbol.iterator] needs to return an iterator
      Luckily for us, the Set object has an iterator for all the values in the set
      therefore we can just return that.
    </notes>
  </div>

  <div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <pre>
<code class="javascript">
const guests = <div class="animation-anchor one">party2018[Symbol.iterator]()</div>;
<div class="animation-anchor two">guests.next();</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.two">
// { value: 'Jim', done: false }
</div>
</code>
    </pre>
    <notes>
    </notes>
  </div>

  <div>
    <pre>
<code class="javascript">
for (const <div class="animation-anchor three">guest</div> <div class="animation-anchor one">of</div> <div class="animation-anchor two">party2018</div>) {
  console.log(guest);
}
</code>
    </pre>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.one">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.two">
    </div>
    <div class="animate-me move"
         data-animation-fn="underline"
         data-color="rgba(255, 0, 0, 0.7)"
         data-element-selector=".animation-anchor.three">
    </div>
    <notes></notes>
  </div>

  <div>
    <pre>
<code class="javascript">
<div class="animation-anchor one">Array.from(party2018.guestList);</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.one">
// Array [ ... ]
</div>
<div class="animation-anchor two">Array.from(party2018);</div>
<div class="animate-me move"
     data-animation-fn="below"
     data-element-selector=".animation-anchor.two">
// Array [ ... ]
</div>
</code>
    </pre>
  </div>

  <!-- END ITERATORS -->

</body>
</html>
